---
title: 计算机网络原理-自顶向下一
date: 2020-08-21 10:12:47
tags: ['计算机网络原理']
category: 计算机
article: 计算机网络原理-自顶向下一
---

# 计算机网络和因特网

## 什么是因特网

什么是因特网？回答这个问题有两种方式：其一，从具体构成上看：可以分成`基本硬件`和`软件组件`。其二，我们能够根据为分布式应用提供服务的联网基础设施来描述因特网。

因特网是网络的网络，是`通信技术`和`计算机技术`紧密结合的产物。是`互连的`，`自治的`。

- 自治：无主从关系
- 互连：互联互通

### 具体构成描述

因特网是世界范围的计算机网络。互联了世界的计算机网络。在之前计算设备多是电脑，发展到现在，加入了手机，电视，平板，汽车等设备。这些都被称为`主机（host）`或`端系统（end system）`。

端系统通过`通信链路`和`分组交换机`连接到一起。通信链路由`同抽电缆`，`铜线`,`光纤`等物理媒体组成。不同物理媒体的传输速率不同，传输速率以（比特/秒度量)。

端系统要发送的时候，把`发送信息`分段，每段和`首部字节`包裹到一起称为一个分组，把分组通过网络从发送端系统发送到接收端系统。

分组交换机分成`路由器`和`链路层交换机`。路由器用于网络核心，链路层交换机用于接入网。

端系统通过`因特网服务提供商ISP`接入，包括家庭ISP，公司ISP等。每个ISP由多个分组交换机和多个通信链路组成。

- 从范围分：局域网，城域网，广域网
- 从拓扑结构分：星型，主线型，树形，网状。
- 从交换网络分：电路交换，报文交换，分组交换。

### 协议

协议控制着网络之间计算机的通信。不同的协议完成不同的通信任务。

协议的三要素：

- 语法：数据与控制信息的结构和格式
- 语义：需要发出何种控制信息，完成何种动作何种响应。差错控制
- 时序：事件顺序，速度匹配

#### 问问题

当你发出`你好`的时候，发送了一条请求报文。当对方回复`你好，你有什么事吗`的时候，回复了一条响应报文。

这时候你问问题`你知道天安门在哪里吗`。发送了一条请求报文。对方回复`天安门在这里呀，......`。回复了一条响应报文。

## 网络边缘

我们的手机，电视，智能设备这些端系统联网，都处于网络边缘。端系统也叫做主机，可以分成客户端和服务端。

### 接入网

接入网是链接网络边缘的端系统到`边缘路由器`的物理链路。边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。

## 网络核心

网络核心是网络之网络，无数的路由器和交换机相互连接在一起。

三种交换方式：
- 电路交换，建立连接-通信-释放链接，独占信道，不应对突发性。不用的时候浪费。通过多路复用技术来实现共享物理链路。
- 报文交换，发送整个报文。 时间 M/R *　h h是跳步数。发送时间长，和跳步数成正比，并且随着报文越大，路由器存储也需要越大。
- 分组交换，报文切成一个个分组，一个分组过一个路由器的时间是 L/R 。整个报文的时间是 M/R + nL/R ，n是路由器数量。

多路复用技术：
- 频分多路复用（FDM）根据不同的频率划分
- 时分多路复用（TDM）根据不同的时间划分
- 波分多路复用（WDM）根据不同的波划分
- 码分多路复用（CDM）每个手机分配码片，通过码片加密传输，再解密。用于手机网络。

### 分组交换

报文：包含从源主机到目的主机传输的任何东西。源主机将长报文划分为较小的一个个`分组`。分组通过通信链路和分组交换机（路由器和链路层交换机）传送。

分组以最大传输速率传输。

```
传输时间 = 分组长度 / 传输速率
传输时间 = L / R
```

#### 例子

一个报文大小7.5Mbps。一个分组1500bits。总共有5000个分组。传输速率R = 1.5Mbps。会经过3段链路，2个路由器。

报文交换时间 = M / R = 7.5 / 1.5 = 5s 3段链路总共就是 5 * 3 = 15s。

分组交换时间 = L / R = 1500 / (1.5 * 10<sup>6</sup>) = 0.001s
5000个分组就是 5000 * 0.001s = 5s，再加上2个路由器，总共是 5.002s

分组交换公式：M/R + nL/R n=路由器数量
报文交换公式：hM/R h=链路数量（跳步数）


### 计算机网络的性能

`速率`即`数据率`或称`数据传输速率`或`比特率`。单位时间（秒）传输信息（比特）量。

- b/s(bps)
- kb/s(kbps)
- Mb/s(Mb/s)
- Gb/s(Gb/s)
- k = 10<sup>3</sup>, M = 10<sup>6</sup>, G = 10<sup>9</sup>

`带宽`原本指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹（HZ）。
网络的`带宽`通常是数字信道所能传输的`最高数据率`，单位b/s。


#### 延迟/时延

分组交换为什么会丢包和时延？

```
路由器的缓存队列满了，在接到分组就会丢弃，产生丢包。
分组进行排队的时间延迟。
```

d<sub>proc</sub> :节点处理延迟
- 差错检测
- 确定输出链路
- 通常 < msec

d<sub>queue</sub>:排队延迟，在路由器里面排队
- 等待输出链路可用
- 取决于路由器拥塞程度
- a:平均分组到达速率
- La/R流量强度 = 0 平均排队延迟很小
- La/R = 1平均排队延迟很大
- La/R > 1超出服务能力

d<sub>trans</sub>:传输延迟
- L:分组长度(bits)
- R:链路带宽(bps)
- d<sub>trans</sub> = L/R

d<sub>prop</sub>:传播延迟
- d:物理链路长度
- s:信号传播速度(2 * 10<sup>8</sup> m/sec)
- d<sub>prop</sub> = d/s

#### 时延带宽积

```
时延带宽积 = 传播时延 * 带宽
          = d<sub>prop</sub> * R(btis)
          = 以比特为单位的链路长度，也就是链路里面有多少个比特
```

#### 分组丢失 丢包

- 队列缓存容量有限，队列满了
- 分组到达已满队列将丢弃
- 丢弃分组可能由前序节点或源重发（也可能不重发）

丢包率 = 丢包数 / 已发分组总数

#### 吞吐量/率

`吞吐量`表示在发送端与接收端之间传送数据速率(b/s)
`即时吞吐量`是给定时刻的速率
`平均吞吐量`是一段时间的平均速率

```
吞吐量取较小的一段链路的带宽吞吐量。
```


### 计算机网络的体系结构

实体：表示任何可发送或接收信息的硬件或软件。
协议：控制两个对等实体通信的规则的集合，协议是“水平的”。
实体需要使用下层服务，对上层提供服务，遵循本层协议，实现本层功能。服务是“垂直的”
下层实现对上层服务是“透明”的

#### OSI7层结构

从功能上描述网络结构：分层结构

- 应用层 http https ftp  报文
- 表示层
- 会话层
- 传输层 tcp upd 报文段
- 网络层 ip 数据报
- 数据链路层 mac 帧
- 物理层

每层进行数据封装，增加头信息，也就是`控制信息`：
- 地址：发送和接收
- 差错检测编码：差错检测或纠正
- 协议控制：附加信息，优先级，服务质量，安全控制
构造协议数据单元（PDU）

##### 物理层功能

- 接口特性
- 比特编码
- 数据率
- 比特同步
    - 时钟同步
- 传输模式
    - 单工 只能单向通信
    - 半双工 可以双向通信，但只能交替进行
    - 全双工

##### 数据链路层

物理链路直接相连的两个节点之间的数据传输。
